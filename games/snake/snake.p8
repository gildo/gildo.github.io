pico-8 cartridge // http://www.pico-8.com
version 29
__lua__
speedinticks = 5
tick = 1

game =  {}

function updatemenu()
	if btn(5) then
		newgame()
	end
end

function drawmenu()
	cls(3)
	print("press ❎ to play!",30,35)
end


function _init()
	game._update = updatemenu
	game._draw = drawmenu
end

function _update()
	game._update()

end

function _draw()
	game._draw()

end


function newgame()
	game._draw = draw
	game._update = update
	tails = {
	}

	x = 5
	y = 5
	dx = 0
	dy = 0
	count = 1
	f()
	
	sfx(1)
end

function draw()
	cls(3)
	map(1)
	spr(s,x*8,y*8)

	for i=1,#tails do
			spr(4,tails[i].x*8,tails[i].y*8)
	end
	

	spr(16,fx,fy)
	print("points  -  "..#tails, 1, 1, 16)
end


function update()
	kp()

	if tick==speedinticks then
		move()
		tick=1
	else
		tick+=1
	end
end

-->8
function kp()
	if btn(0) and dx!=1 then -- left
		dx=-1
		dy=0
		s = 0
	end
	if btn(1) and dx!=-1 then -- right
		dx=1
		dy=0
		s = 1
	end
	if btn(2) and dy!=1 then -- up
		dy=-1
		dx=0
		s = 2
	end
	if btn(3) and dy!=-1 then -- down
		dy=1
		dx=0
		s= 3
	end

end

function move()
	if distance(x*8,y*8,fx,fy) < 8 then
		count += 1
		f()
		sfx(2)
	end

	if count-1 == #tails then for i=1,#tails-1 do tails[i] = tails[i+1] end end
	
	tails[count-1] = {}
	tails[count-1].x = x
	tails[count-1].y = y

	x += dx
	y += dy
	
	check_suicide()
end
-->8
function f()
	fx = (flr(rnd(90)))
	fy = (flr(rnd(90)))
	
	if fx < 10 then	fx += (8-fx) end
	if fy < 10 then fy += (8-fy) end
end

function distance(x1, y1, x2, y2)
  return sqrt((x2 - x1)^2 + (y2 - y1)^2)
end

function check_suicide()
	for i=1,#tails do
		if distance(x,y,tails[i].x,tails[i].y) < 1 then
			game._draw=drawrip
			game._update=updaterip
		end
	end
	
	if(x>14 or x<1 or y > 14 or y<1) then 
		game._draw = drawrip
		game._update=updaterip
	end
end

function updaterip()
	if btn(5) then newgame() end
end


function drawrip()
	print("🐱 NOOO!!!!!", 40,45, 8)
	print("points: "..#tails, 45,55, 8)
	print("press ❎ to play again!",22,65)
	sfx(-1,0)
end

__gfx__
0000000000000000000000000bbbbbb0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000bbbbbbbbbb000000ee0000bbbbbb00bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bb7bbbbbb7bb0000bbbb000bbbbbb00b8888b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ebbbbbbbbbbbbe00bbbbbb00b7bb7b00b8888b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0ebbbbbbbbbbbbe00b7bb7b00bbbbbb00b8888b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00bb7bbbbbb7bb000bbbbbb000bbbb000b8888b00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000bbbbbbbbbb0000bbbbbb0000ee0000bbbbbb00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000bbbbbb000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000333333433333433333333333444444444444444444444444449449444494494444444444000000000000000000000000000000000000000000000000
00b0000033343334333333333a339333449449444444444444444444449449444494494444444444000000000000000000000000000000000000000000000000
00888800343343333a33433333933339449449444999999444999999449999999999994499999944000000000000000000000000000000000000000000000000
0088880033333333333333a333333333449449444444444444944944449449444494494444944944000000000000000000000000000000000000000000000000
008888003434334333333333393a3933449449444444444444944944449449444494494444944944000000000000000000000000000000000000000000000000
008888004333333334a3333333333333449449444999999444999999449999999999994499999944000000000000000000000000000000000000000000000000
00000000333333433333334339333a33449449444444444444944944444444444444444444944944000000000000000000000000000000000000000000000000
00000000333433333a33333333333333444444444444444444944944444444444444444444944944000000000000000000000000000000000000000000000000
__gff__
0404040404000000000000000000000002000000010101010101000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0016151515151515151515151515151519000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014130000001200110000000000000014000012000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000000000000000000011000014130000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014001100000000000000120000120014001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000001300110000000000000014001300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000000000000012001100000014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014001100000013000000000000131214001200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000120000000013000012000014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000000013000000000000001114001300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000000000013130000001100000014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014001200130000000012000013000014131100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014000012001300000000000013000014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014001111001300131300000000110014000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014001111000000000000120000130014001100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0014120000130012001300000000001214000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0017151515151515151515151515151518000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000d001e23110211101d0101a0101a01019010190101901019010190101901017010120100f0100f0100f0100f01010010100100f0100f0100e0100f0100e0100d01010010120101f110221101f1100001000010
0010002000510015102b5100751010510175101951018510235101951001510115103551005510095100e51016510205101f5100d510155101e51022510275102e51023510185100a510065100d510155100f510
001000002505021050220003a0003a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
